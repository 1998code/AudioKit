//
//  AKAUVarispeedWindow.swift
//  AudioKit
//
//  Autogenerated by scripts by Aurelius Prochazka. Do not edit directly.
//  Copyright (c) 2015 Aurelius Prochazka. All rights reserved.
//

#if os(OSX)
    import Foundation
    import Cocoa

    public class AKAUVarispeedWindow: NSWindow {

        let windowWidth = 400
        let padding = 30
        let sliderHeight = 20
        let numberOfComponents = 2

        public let playbackRateSlider: NSSlider
        public let playbackCentsSlider: NSSlider

        let playbackRateTextField: NSTextField
        let playbackCentsTextField: NSTextField

        var varispeed: AKAUVarispeed

        public init(_ control: AKAUVarispeed) {
            varispeed = control
            let sliderWidth = windowWidth - 2 * padding

            playbackRateSlider = NSSlider(frame: NSRect(x: padding, y: 0, width: sliderWidth, height: sliderHeight))
            playbackCentsSlider = NSSlider(frame: NSRect(x: padding, y: 0, width: sliderWidth, height: sliderHeight))

            playbackRateTextField = NSTextField(frame: NSRect(x: padding, y: 0, width: sliderWidth, height: sliderHeight))
            playbackCentsTextField = NSTextField(frame: NSRect(x: padding, y: 0, width: sliderWidth, height: sliderHeight))

            let titleHeightApproximation = 50
            let windowHeight = padding * 2 + titleHeightApproximation + numberOfComponents * 3 * sliderHeight

            super.init(contentRect: NSRect(x: padding, y: padding, width: windowWidth, height: windowHeight),
                styleMask: NSTitledWindowMask,
                backing: .Buffered,
                `defer`: false)
            self.hasShadow = true
            self.styleMask = NSBorderlessWindowMask | NSResizableWindowMask
            self.movableByWindowBackground = true
            self.level = 7
            self.title = "AKAUVarispeed"

            let viewRect = NSRect(x: 0, y: 0, width: windowWidth, height: windowHeight)
            let view = NSView(frame: viewRect)

            let topTitle = NSTextField()
            topTitle.stringValue = "AKAUVarispeed"
            topTitle.editable = false
            topTitle.drawsBackground = false
            topTitle.bezeled = false
            topTitle.alignment = NSCenterTextAlignment
            topTitle.font = NSFont(name: "Lucida Grande", size: 24)
            topTitle.sizeToFit()
            topTitle.frame.origin.x = CGFloat(windowWidth / 2) - topTitle.frame.width / 2
            topTitle.frame.origin.y = CGFloat(windowHeight - padding) - topTitle.frame.height
            view.addSubview(topTitle)

            playbackRateTextField.stringValue = "Playback Rate: \(varispeed.playbackRate) Rate"
            playbackRateTextField.editable = false
            playbackRateTextField.drawsBackground = false
            playbackRateTextField.bezeled = false
            playbackRateTextField.frame.origin.y = topTitle.frame.origin.y -  2 *  CGFloat(sliderHeight)
            view.addSubview(playbackRateTextField)

            playbackRateSlider.target = self
            playbackRateSlider.action = "updatePlaybackrate"
            playbackRateSlider.minValue = 0.25
            playbackRateSlider.maxValue = 4.0
            playbackRateSlider.floatValue = Float(varispeed.playbackRate)
            playbackRateSlider.frame.origin.y = topTitle.frame.origin.y - 3 * CGFloat(sliderHeight)
            view.addSubview(playbackRateSlider)
            playbackCentsTextField.stringValue = "Playback Cents: \(varispeed.playbackCents) Cents"
            playbackCentsTextField.editable = false
            playbackCentsTextField.drawsBackground = false
            playbackCentsTextField.bezeled = false
            playbackCentsTextField.frame.origin.y = topTitle.frame.origin.y -  5 *  CGFloat(sliderHeight)
            view.addSubview(playbackCentsTextField)

            playbackCentsSlider.target = self
            playbackCentsSlider.action = "updatePlaybackcents"
            playbackCentsSlider.minValue = -2400
            playbackCentsSlider.maxValue = 2400
            playbackCentsSlider.floatValue = Float(varispeed.playbackCents)
            playbackCentsSlider.frame.origin.y = topTitle.frame.origin.y - 6 * CGFloat(sliderHeight)
            view.addSubview(playbackCentsSlider)

            self.contentView!.addSubview(view)
            self.makeKeyAndOrderFront(nil)
        }

        internal func updatePlaybackrate() {
            varispeed.playbackRate = playbackRateSlider.floatValue
            playbackRateTextField.stringValue = "Playback Rate \(String(format: "%0.4f", varispeed.playbackRate)) Rate"
        }
        internal func updatePlaybackcents() {
            varispeed.playbackCents = playbackCentsSlider.floatValue
            playbackCentsTextField.stringValue = "Playback Cents \(String(format: "%0.4f", varispeed.playbackCents)) Cents"
        }

        required public init?(coder: NSCoder) {
            fatalError("init(coder:) has not been implemented")
        }
    }

#endif
